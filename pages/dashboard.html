<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MoBank - Dashboard</title>
    <link rel="stylesheet" href="../css/style.css">
    <script type="module" src="../js/auth.js" defer></script>
</head>
<body>
    <div id="header-placeholder"></div>

    <main>
        <div class="container">
            <h2>Dashboard</h2>
            <p id="welcome-message">Welcome to your dashboard!</p>
            <button id="logout-btn">Logout</button>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../js/headerFooter.js"></script>
    <script type="module">
        import { getUser, isAuthenticated, logoutUser } from "../js/auth.js";

        async function displayUserInfo() {
            const authenticated = await isAuthenticated();
            if (!authenticated) {
                window.location.href = '/pages/login.html';
                return;
            }
            const user = await getUser();
            document.getElementById('welcome-message').innerText = `Welcome, ${user.name}!`;
        }

        document.getElementById('logout-btn').addEventListener('click', logoutUser);
        displayUserInfo();
    </script>
</body>
</html>